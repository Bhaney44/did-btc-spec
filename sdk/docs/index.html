<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>did-btc-sdk</title><meta name="description" content="Documentation for did-btc-sdk"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script>
  <script type="module">
      import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs';
      mermaid.initialize({ startOnLoad: true, theme: 'dark'});
  </script>
</head>
<body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">did-btc-sdk</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h2>did-btc-sdk</h2></div><div class="tsd-panel tsd-typography"><a id="md:didbtc-sdk" class="tsd-anchor"></a><h1><a href="#md:didbtc-sdk">did:btc SDK</a></h1><p>This repository contains a software development kit that implements the <a href="https://microstrategy.github.io/did-btc-spec/">did:btc Method Specification</a>, whereby <code>did:btc</code> DIDs (Decentralized Identifiers) are created, updated, and resolved using bitcoin transactions. It is written in Typescript and intended for use in both backend (e.g. Node.js) and browser-based environments.</p>
<p>The key pieces of functionality include:</p>
<ul>
<li><strong>Creation</strong>: Create a single DID or a batch of DIDs in a single transaction.</li>
<li><strong>Resolution</strong>: Resolve a DID from its creation transaction and any subsequent update transactions.</li>
<li><strong>Update/Deactivation</strong>: Update or deactivate a single DID or a batch of DIDs or any subset within.</li>
<li><strong>DID Encoding</strong>: Encode a <code>did:btc</code> identifier based on the position of the creation transaction within the blockchain.</li>
<li><strong>DID Decoding</strong>: Decode a <code>did:btc</code> identifier to determine its position in the blockchain.</li>
</ul>
<a id="md:api-documentation" class="tsd-anchor"></a><h2><a href="#md:api-documentation">API Documentation</a></h2><p>Documentation for the methods and data structures in this SDK are currently available at <a href="https://microstrategy.github.io/did-btc-spec/sdk/docs/">https://microstrategy.github.io/did-btc-spec/sdk/docs/</a>.</p>
<a id="md:usage" class="tsd-anchor"></a><h2><a href="#md:usage">Usage</a></h2><p>This SDK is intended to be used within an application or environment that interacts with the bitcoin blockchain - it does not include a bitcoin node or wallet or a built-in way to interact with one. Rather, it is designed to work with any bitcoin client that can fetch transactions from and (optionally) broadcast transactions to the bitcoin network in their raw hex format. Such clients may include:</p>
<ul>
<li><a href="https://bitcoincore.org/">Bitcoin Core</a> and its <a href="https://developer.bitcoin.org/reference/rpc/getrawtransaction.html">getrawtransaction</a> and <a href="https://developer.bitcoin.org/reference/rpc/sendrawtransaction.html">sendrawtransaction</a> RPC methods.</li>
<li>Electrum and its <a href="https://electrumx.readthedocs.io/en/latest/protocol-methods.html#blockchain-transaction-get">blockchain.transaction.get</a> and <a href="https://electrumx.readthedocs.io/en/latest/protocol-methods.html#blockchain-transaction-broadcast">blockchain.transaction.broadcast</a> protocol methods.</li>
<li>Third party block explorer APIs such as <a href="https://github.com/Blockstream/esplora/blob/master/API.md">Blockstream&#39;s Esplora</a> or <a href="https://mempool.space/docs/api/rest">mempool.space</a>.</li>
</ul>
<p>Furthermore, creating bitcoin transactions to create or update DIDs requires a wallet with private keys and available UTXOs to pay for transaction fees. The SDK does not manage wallets or private keys, so it is up to the developer to ensure that the wallet is properly funded and that the private keys are kept secure.</p>
<a id="md:resolving-a-did" class="tsd-anchor"></a><h3><a href="#md:resolving-a-did">Resolving a DID</a></h3><p><a href="https://microstrategy.github.io/did-btc-spec/#read-resolve">Resolving a DID</a> refers to the process of decoding a <code>did:btc</code> identifier and fetching the corresponding transaction(s) from the blockchain. The transaction is then parsed to extract the DID information, which can be used to build a <a href="https://www.w3.org/TR/did-core/#dfn-did-documents">DID Document</a> which includes a list of <a href="https://www.w3.org/TR/did-core/#verification-methods">Verification Methods</a> by which the <a href="https://www.w3.org/TR/did-core/#dfn-did-subjects">DID Subject</a> can assert the validity of a message, authenticate as themselves, or perform other actions that require verification.</p>
<p>This process uses the following methods from the SDK, which are illustrated in the sequence diagram below.</p>
<ul>
<li><code>decodeDidBtc</code></li>
<li><code>resolveDidBtc</code></li>
<li><code>buildDidDocument</code></li>
</ul>
<pre class="mermaid">
  flowchart TD
    A[did:btc:yqy3...]-->B[decodeDidBtc]
    B-->C[blockHeight\ntxIndex\ndidIndex]
    C-->|lookup transaction|D[Bitcoin Client]
    D-->|lookup update\ntransactions|D
    D-->E[Raw Transaction Hex]
    E-->F[resolveDidBtc]
    F-->G[DID]
    G-->H1[Verification Method\nPublic Keys]
    G-->H2[buildDidDocument]
    A-->H2
    H2-->I[DID Document]
    
    style D fill:#f7931a
    style B fill:#df3741
    style F fill:#df3741
    style H2 fill:#df3741
</pre>
<p>The following code example demonstrates how to resolve a <code>did:btc</code> identifier:</p>
<pre><code class="language-javascript"><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-3">decodeDidBtc</span><span class="hl-1">, </span><span class="hl-3">resolveDidBtc</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-4">&#39;@microstrategy/did-btc-sdk&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">exampleDidId</span><span class="hl-1"> = </span><span class="hl-4">&#39;did:btc:yqy3-8qmr-qpqq-ckwd-ye&#39;</span><span class="hl-1">;</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">decodedDidId</span><span class="hl-1"> = </span><span class="hl-2">decodeDidBtc</span><span class="hl-1">(</span><span class="hl-3">exampleDidId</span><span class="hl-1">);</span><br/><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-2">log</span><span class="hl-1">(</span><span class="hl-3">decodedDidId</span><span class="hl-1">);</span><br/><span class="hl-7">// {</span><br/><span class="hl-7">//   network: &#39;mainnet&#39;,</span><br/><span class="hl-7">//   blockHeight: 123456,</span><br/><span class="hl-7">//   txIndex: 123,</span><br/><span class="hl-7">//   didIndex: 1,</span><br/><span class="hl-7">// }</span><br/><span class="hl-5">const</span><span class="hl-1"> { </span><span class="hl-6">didIndex</span><span class="hl-1"> } = </span><span class="hl-3">decodedDidId</span><span class="hl-1">;</span><br/><br/><span class="hl-5">let</span><span class="hl-1"> </span><span class="hl-3">txHex</span><span class="hl-1">; </span><span class="hl-7">// the transaction hex fetched from the blockchain using the decoded DID</span><br/><span class="hl-5">let</span><span class="hl-1"> </span><span class="hl-3">updateTxHex</span><span class="hl-1">; </span><span class="hl-7">// the transaction hex of an update reveal transaction, if one exists</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">did</span><span class="hl-1"> = </span><span class="hl-2">resolveDidBtc</span><span class="hl-1">([</span><span class="hl-3">txHex</span><span class="hl-1">, </span><span class="hl-3">updateTxHex</span><span class="hl-1">], </span><span class="hl-3">didIndex</span><span class="hl-1">);</span>
</code><button>Copy</button></pre>
<a id="md:getting-a-did-document" class="tsd-anchor"></a><h4><a href="#md:getting-a-did-document">Getting a DID Document</a></h4><p>After resolving a DID, you can use the <code>buildDidDocument</code> function to build a DID Document according to the <a href="https://www.w3.org/TR/did-core/#dfn-did-documents">W3C DID Specification</a>.</p>
<pre><code class="language-javascript"><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-3">buildDidDocument</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-4">&#39;@microstrategy/did-btc-sdk&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">didDocument</span><span class="hl-1"> = </span><span class="hl-2">buildDidDocument</span><span class="hl-1">(</span><span class="hl-3">did</span><span class="hl-1">, </span><span class="hl-3">exampleDid</span><span class="hl-1">);</span><br/><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-2">log</span><span class="hl-1">(</span><span class="hl-3">didDocument</span><span class="hl-1">);</span><br/><span class="hl-7">// {</span><br/><span class="hl-7">//   &quot;@context&quot;: [</span><br/><span class="hl-7">//     &quot;https://www.w3.org/ns/did/v1&quot;,</span><br/><span class="hl-7">//     &quot;https://w3id.org/security/multikey/v1&quot;</span><br/><span class="hl-7">//   ],</span><br/><span class="hl-7">//   &quot;id&quot;: &quot;did:btc:yqy3-8qmr-qpqq-ckwd-ye&quot;,</span><br/><span class="hl-7">//   &quot;controller&quot;: &quot;did:key:z6DtU6TwakgQVMw6fisdMtebcPRgjofZsvZCtnUS5N3n456d&quot;,</span><br/><span class="hl-7">//   &quot;verificationMethod&quot;: [</span><br/><span class="hl-7">//     {</span><br/><span class="hl-7">//       &quot;id&quot;: &quot;did:btc:yqy3-8qmr-qpqq-ckwd-ye#key-0&quot;,</span><br/><span class="hl-7">//       &quot;controller&quot;: &quot;did:btc:yqy3-8qmr-qpqq-ckwd-ye&quot;,</span><br/><span class="hl-7">//       &quot;type&quot;: &quot;Multikey&quot;,</span><br/><span class="hl-7">//       &quot;publicKeyMultibase&quot;: &quot;z6MkpicmaHUuxCL3zBCoMnkWqGLZThDUiJsTajm8iMrhfvPc&quot;</span><br/><span class="hl-7">//     }</span><br/><span class="hl-7">//   ],</span><br/><span class="hl-7">//   &quot;authentication&quot;: [</span><br/><span class="hl-7">//     &quot;did:btc:yqy3-8qmr-qpqq-ckwd-ye#key-0&quot;</span><br/><span class="hl-7">//   ],</span><br/><span class="hl-7">//   &quot;assertion&quot;: [</span><br/><span class="hl-7">//     &quot;did:btc:yqy3-8qmr-qpqq-ckwd-ye#key-0&quot;</span><br/><span class="hl-7">//   ]</span><br/><span class="hl-7">// }</span>
</code><button>Copy</button></pre>
<a id="md:creating-a-did" class="tsd-anchor"></a><h3><a href="#md:creating-a-did">Creating a DID</a></h3><p><a href="https://microstrategy.github.io/did-btc-spec/#create">Creating a DID</a> refers to the process of creating a new <code>did:btc</code> identity by broadcasting a bitcoin transaction to the blockchain. This transaction includes the public key(s) of the DID subject(s) and a set of flags that indicate how the public key(s) can be used in the future. Once the transaction is confirmed on chain, a <code>did:btc</code> identifier can be created and used by others to resolve the DID.</p>
<p>This process uses the following methods from the SDK, which are illustrated in the sequence diagram below.</p>
<ul>
<li><code>buildDidCreationTransaction</code></li>
<li><code>encodeDidBtc</code></li>
</ul>
<pre class="mermaid">
  flowchart TD
      A1[Subject\nPublic Key]-->B[buildDidCreationTransaction]
      A2[UTXO]-->B
      A3[UTXO\nPrivkey]-->B
      B-->C[Raw Transaction Hex]
      C-->|broadcast transaction|D[Bitcoin Client]
      D-->|check transaction\nconfirmation|D
      D-->E[blockHeight &\ntxIndex of\nconfirmation\ntransaction]
      E-->F[encodeDidBtc]
      F-->G[did:btc:yqy3...]

      style D fill:#f7931a
      style B fill:#df3741
      style F fill:#df3741
  </pre>
<p>The following code example demonstrates how to create a DID,</p>
<pre><code class="language-javascript"><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-3">buildDidCreationTransaction</span><span class="hl-1">, </span><span class="hl-3">prependCodecToKey</span><span class="hl-1">, </span><span class="hl-3">VERIFICATION_RELATIONSHIP_FLAGS</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-4">&#39;@microstrategy/did-btc-sdk&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">let</span><span class="hl-1"> </span><span class="hl-3">utxo</span><span class="hl-1"> = { </span><span class="hl-7">// a p2tr UTXO to pay for the transaction</span><br/><span class="hl-1">  </span><span class="hl-3">txid:</span><span class="hl-1"> </span><span class="hl-3">Buffer</span><span class="hl-1">.</span><span class="hl-2">from</span><span class="hl-1">(</span><span class="hl-4">&#39;48452f42ac0accd63a0467f7e0406945320061bd19971bf34478582d76e85dbe&#39;</span><span class="hl-1">, </span><span class="hl-4">&#39;hex&#39;</span><span class="hl-1">), </span><span class="hl-7">// the transaction id of the UTXO,</span><br/><span class="hl-1">  </span><span class="hl-3">vout:</span><span class="hl-1"> </span><span class="hl-8">0</span><span class="hl-1"> </span><span class="hl-7">// the output index of the UTXO,</span><br/><span class="hl-1">  </span><span class="hl-3">amount</span><span class="hl-1">: </span><span class="hl-8">4131295</span><span class="hl-1">, </span><span class="hl-7">// the amount of the UTXO in satoshis,</span><br/><span class="hl-1">};</span><br/><span class="hl-5">let</span><span class="hl-1"> </span><span class="hl-3">privkey</span><span class="hl-1">: </span><span class="hl-9">Buffer</span><span class="hl-1">; </span><span class="hl-7">// the keypath private key of the UTXO</span><br/><br/><span class="hl-5">let</span><span class="hl-1"> </span><span class="hl-3">ed25519Pubkey</span><span class="hl-1">: </span><span class="hl-9">Buffer</span><span class="hl-1">; </span><span class="hl-7">// an ed25519 public key of the DID subject</span><br/><span class="hl-7">// convert the ed25519 public key to a multikey</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">multikey</span><span class="hl-1"> = </span><span class="hl-2">prependCodecToKey</span><span class="hl-1">(</span><span class="hl-3">ed25519Pubkey</span><span class="hl-1">, </span><span class="hl-4">&#39;ed25519-pub&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">verificationRelationshipFlags</span><span class="hl-1"> = </span><span class="hl-6">VERIFICATION_RELATIONSHIP_FLAGS</span><span class="hl-1">.</span><span class="hl-6">AUTHENTICATION</span><span class="hl-1"> | </span><span class="hl-6">VERIFICATION_RELATIONSHIP_FLAGS</span><span class="hl-1">.</span><span class="hl-6">ASSERTION</span><span class="hl-1">; </span><span class="hl-7">// flags to indicate that this public key can be used for authentication and assertion</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">satsPerVbyte</span><span class="hl-1"> = </span><span class="hl-8">123</span><span class="hl-1">; </span><span class="hl-7">// the fee rate in satoshis per vbyte, this can be fetched from a fee estimation service or API</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> { </span><span class="hl-6">txHex</span><span class="hl-1"> } = </span><span class="hl-2">buildDidCreationTransaction</span><span class="hl-1">(</span><br/><span class="hl-1">  </span><span class="hl-3">multikey</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-3">walletUtxos</span><span class="hl-1">: [{ </span><span class="hl-3">utxo</span><span class="hl-1">, </span><span class="hl-3">privkey</span><span class="hl-1"> }],</span><br/><span class="hl-1">  </span><span class="hl-3">verificationRelationshipFlags</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-3">satsPerVbyte</span><span class="hl-1">,</span><br/><span class="hl-1">);</span>
</code><button>Copy</button></pre>
<p>The <code>txHex</code> can then be broadcast to the bitcoin network using the client of your choice.</p>
<a id="md:encoding-a-did-id" class="tsd-anchor"></a><h4><a href="#md:encoding-a-did-id">Encoding a DID id</a></h4><p>Once the transaction is confirmed, the DID id can be created and resolved by others.</p>
<pre><code class="language-javascript"><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-3">encodeDidBtc</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-4">&#39;@microstrategy/did-btc-sdk&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">blockHeight</span><span class="hl-1"> = </span><span class="hl-8">123456</span><span class="hl-1">; </span><span class="hl-7">// the height of the block confirming the creation transaction</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">txIndex</span><span class="hl-1"> = </span><span class="hl-8">123</span><span class="hl-1">; </span><span class="hl-7">// the index of the confirmation transaction in the block</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">didId</span><span class="hl-1"> = </span><span class="hl-2">encodeDidBtc</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-3">network:</span><span class="hl-1"> </span><span class="hl-4">&#39;mainnet&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-3">blockHeight</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-3">txIndex</span><span class="hl-1">,</span><br/><span class="hl-1">});</span><br/><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-2">log</span><span class="hl-1">(</span><span class="hl-3">didId</span><span class="hl-1">); </span><span class="hl-7">// did:btc:rqy3-8qmr-q4f4-z9z</span>
</code><button>Copy</button></pre>
<a id="md:creating-a-batch-of-dids" class="tsd-anchor"></a><h4><a href="#md:creating-a-batch-of-dids">Creating a batch of DIDs</a></h4><p>A batch of DIDs can be created in a single transaction by providing an array of public keys and private keys to the <code>buildDidCreationTransaction</code> function, this saves on transaction fees and blockchain space.</p>
<pre><code class="language-javascript"><span class="hl-0">import</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-3">buildBatchDidCreationTransactions</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-3">codecs</span><span class="hl-1">,</span><br/><span class="hl-1">} </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-4">&#39;@microstrategy/did-btc-sdk&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">let</span><span class="hl-1"> </span><span class="hl-3">ed25519Pubkeys</span><span class="hl-1">; </span><span class="hl-7">// an array of ed25519 public keys of the DID subjects</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">codec</span><span class="hl-1"> = </span><span class="hl-3">codecs</span><span class="hl-1">[</span><span class="hl-4">&#39;ed25519-pub&#39;</span><span class="hl-1">];</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> { </span><span class="hl-6">revealTransaction</span><span class="hl-1"> } = </span><span class="hl-2">buildBatchDidCreationTransactions</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-3">utxo</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-3">privkey</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-3">satsPerVByte</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-3">pubkeys:</span><span class="hl-1"> </span><span class="hl-3">ed25519Pubkeys</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-3">verificationRelationshipFlags</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-3">codec</span><span class="hl-1">,</span><br/><span class="hl-1">});</span><br/><span class="hl-5">const</span><span class="hl-1"> { </span><span class="hl-6">txHex</span><span class="hl-1"> } = </span><span class="hl-3">revealTransaction</span><span class="hl-1">;</span>
</code><button>Copy</button></pre>
<a id="md:considerations" class="tsd-anchor"></a><h2><a href="#md:considerations">Considerations</a></h2><a id="md:buffer" class="tsd-anchor"></a><h3><a href="#md:buffer">Buffer</a></h3><p>This SDK, as well as its dependency <a href="https://github.com/bitcoinjs/bitcoinjs-lib">bitcoinjs-lib</a> uses the <a href="https://nodejs.org/api/buffer.html">Buffer</a> class from Node.js to handle binary data. If you are using this SDK in an environment other than Node.js, such as a browser, you may need to use a polyfill or a library like <a href="https://www.npmjs.com/package/buffer">buffer</a> to provide this class.</p>
<a id="md:security" class="tsd-anchor"></a><h3><a href="#md:security">Security</a></h3><p>The SDK takes private keys as parameters and uses them to sign bitcoin transactions and it is important to keep them secure. The SDK does not store or persist any private keys, so it is up to the developer to manage the lifecycle of the private keys and ensure that they are not leaked or compromised.</p>
<p>Although these keys are expected to control some funds on chain for the purpose of paying transaction fees and creating new outputs, it is recommended to keep the value of these funds to a minimum. Developers should use a separate wallet for managing funds of significant value and to only use the keys provided to the SDK for the purpose of creating and updating DIDs.</p>
<a id="md:blockchain-limitations" class="tsd-anchor"></a><h3><a href="#md:blockchain-limitations">Blockchain Limitations</a></h3><p>The bitcoin network and blockchain have limitations that can affect the creation, resolution, and updating of <code>did:btc</code> DIDs. Transactions may take hours or days to confirm on chain, and in extreme cases may never confirm. Blocks may be orphaned and the blockchain may be reorganized. For this reason, <code>did:btc</code> identifiers should not be encoded or shared until the creation transaction has been confirmed on chain at a depth at least 6 and preferably 100 blocks (as recommended by the <a href="https://github.com/bitcoin/bips/blob/master/bip-0136.mediawiki#abstract">BIP136 specification</a>).</p>
<p>For more detail, see <a href="https://microstrategy.github.io/did-btc-spec/#considerations">https://microstrategy.github.io/did-btc-spec/#considerations</a>.</p>
<a id="md:implementation-limitations" class="tsd-anchor"></a><h3><a href="#md:implementation-limitations">Implementation Limitations</a></h3><p>This section lists known limitations of the current implementation of the SDK.</p>
<a id="md:scriptpubkey-types" class="tsd-anchor"></a><h4><a href="#md:scriptpubkey-types">ScriptPubKey Types</a></h4><p>Although the bitcoin protocol allows a wide variety of script types for use in <a href="https://river.com/learn/terms/s/scriptpubkey/">ScriptPubKeys</a> to lock and spend UTXOs, the SDK currently only uses <a href="https://river.com/learn/terms/p/pay-to-taproot-p2tr/">Pay-To-Taproot</a> scripts that can be spent using <a href="https://github.com/bitcoin/bips/blob/master/bip-0341.mediawiki#user-content-Taproot_key_path_spending_signature_validation">key path spending</a> with a single private key. Any UTXOs used to fund transactions must be of this type, and any UTXOs created by the SDK - such as DID UTXOs - will also be of this type.</p>
<p>This means that the SDK does not currently support complex spending conditions to define the control of a DID or batch of DIDs, such as multisignature or hash-locked scripts.</p>
<a id="md:supported-keys" class="tsd-anchor"></a><h4><a href="#md:supported-keys">Supported Keys</a></h4><p>Currently, this SDK only supports creating and resolving DIDs whose verification methods use either <a href="https://ed25519.cr.yp.to/">Ed25519</a> or <a href="https://en.bitcoin.it/wiki/Secp256k1">secp256k1</a> keys. Support for other curves and key types may be added in the future.</p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-index-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><h4 class="uppercase">Member Visibility</h4><form><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></form></div><div class="tsd-theme-toggle"><h4 class="uppercase">Theme</h4><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-index-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:didbtc-sdk"><span>did:btc SDK</span></a><ul><li><a href="#md:api-documentation"><span>API <wbr/>Documentation</span></a></li><li><a href="#md:usage"><span>Usage</span></a></li><li><ul><li><a href="#md:resolving-a-did"><span>Resolving a DID</span></a></li><li><ul><li><a href="#md:getting-a-did-document"><span>Getting a DID <wbr/>Document</span></a></li></ul></li><li><a href="#md:creating-a-did"><span>Creating a DID</span></a></li><li><ul><li><a href="#md:encoding-a-did-id"><span>Encoding a DID id</span></a></li><li><a href="#md:creating-a-batch-of-dids"><span>Creating a batch of DIDs</span></a></li></ul></li></ul></li><li><a href="#md:considerations"><span>Considerations</span></a></li><li><ul><li><a href="#md:buffer"><span>Buffer</span></a></li><li><a href="#md:security"><span>Security</span></a></li><li><a href="#md:blockchain-limitations"><span>Blockchain <wbr/>Limitations</span></a></li><li><a href="#md:implementation-limitations"><span>Implementation <wbr/>Limitations</span></a></li><li><ul><li><a href="#md:scriptpubkey-types"><span>Script<wbr/>Pub<wbr/>Key <wbr/>Types</span></a></li><li><a href="#md:supported-keys"><span>Supported <wbr/>Keys</span></a></li></ul></li></ul></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html" class="current"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="assets/icons.svg#icon-1"></use></svg><span>did-btc-sdk</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base="."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
